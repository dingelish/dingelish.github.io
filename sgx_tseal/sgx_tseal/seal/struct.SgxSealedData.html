<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `SgxSealedData` struct in crate `sgx_tseal`.">
    <meta name="keywords" content="rust, rustlang, rust-lang, SgxSealedData">

    <title>sgx_tseal::seal::SgxSealedData - Rust</title>

    <link rel="stylesheet" type="text/css" href="../../normalize.css">
    <link rel="stylesheet" type="text/css" href="../../rustdoc.css">
    <link rel="stylesheet" type="text/css" href="../../main.css">
    

    
    
</head>
<body class="rustdoc struct">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <nav class="sidebar">
        
        <p class='location'><a href='../index.html'>sgx_tseal</a>::<wbr><a href='index.html'>seal</a></p><script>window.sidebarCurrent = {name: 'SgxSealedData', ty: 'struct', relpath: ''};</script><script defer src="sidebar-items.js"></script>
    </nav>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press ‘S’ to search, ‘?’ for more options…"
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content">
<h1 class='fqn'><span class='in-band'>Struct <a href='../index.html'>sgx_tseal</a>::<wbr><a href='index.html'>seal</a>::<wbr><a class="struct" href=''>SgxSealedData</a></span><span class='out-of-band'><span id='render-detail'>
                   <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">
                       [<span class='inner'>&#x2212;</span>]
                   </a>
               </span><a class='srclink' href='../../src/sgx_tseal/seal.rs.html#108-111' title='goto source code'>[src]</a></span></h1>
<pre class='rust struct'>pub struct SgxSealedData&lt;T:&nbsp;?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>&gt; { /* fields omitted */ }</pre><div class='docblock'><p>The structure about the sealed data. </p>
</div><h2 id='methods'>Methods</h2><h3 class='impl'><span class='in-band'><code>impl&lt;T:&nbsp;<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Copy.html" title="trait core::marker::Copy">Copy</a>&gt; <a class="struct" href="../../sgx_tseal/seal/struct.SgxSealedData.html" title="struct sgx_tseal::seal::SgxSealedData">SgxSealedData</a>&lt;T&gt;</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../src/sgx_tseal/seal.rs.html#142-414' title='goto source code'>[src]</a></span></h3>
<div class='docblock'><p>The encrypt_text to seal is T, and T must have Copy trait. </p>
</div><div class='impl-items'><h4 id='method.new' class="method"><span id='new.v' class='invisible'><code>fn <a href='#method.new' class='fnname'>new</a>() -&gt; Self</code></span></h4>
<div class='docblock'><p>Create a SgxSealedData with default values.</p>
</div><h4 id='method.from_raw_sealed_data_t' class="method"><span id='from_raw_sealed_data_t.v' class='invisible'><code>unsafe fn <a href='#method.from_raw_sealed_data_t' class='fnname'>from_raw_sealed_data_t</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;p: *mut <a class="struct" href="../../sgx_types/types/struct.sgx_sealed_data_t.html" title="struct sgx_types::types::sgx_sealed_data_t">sgx_sealed_data_t</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;len: u32<br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;Self&gt;</code></span></h4>
<div class='docblock'><p>Convert a pointer of sgx_sealed_data_t buffer to SgxSealedData.</p>
<h1 id="requirements" class="section-header"><a href="#requirements">Requirements</a></h1>
<p>Library: libsgx_tservice.a or libsgx_tservice_sim.a (simulation)</p>
<h1 id="parameters" class="section-header"><a href="#parameters">Parameters</a></h1>
<p><strong>p</strong></p>
<p>The mutable pointer of sgx_sealed_data_t buffer.</p>
<p><strong>len</strong></p>
<p>The size of the parameter <code>p</code>.</p>
<h1 id="return-value" class="section-header"><a href="#return-value">Return value</a></h1>
<p><strong>Some(SgxSealedData)</strong></p>
<p>Indicates the conversion is successfully. The return value is SgxSealedData.</p>
<p><strong>None</strong></p>
<p>Maybe the size of T is zero.</p>
</div><h4 id='method.seal_data' class="method"><span id='seal_data.v' class='invisible'><code>fn <a href='#method.seal_data' class='fnname'>seal_data</a>(additional_text: &amp;[u8], encrypt_text: &amp;T) -&gt; <a class="type" href="../../sgx_types/error/type.SgxResult.html" title="type sgx_types::error::SgxResult">SgxResult</a>&lt;Self&gt;</code></span></h4>
<div class='docblock'><p>This function is used to AES-GCM encrypt the input data. Two input data sets
are provided: one is the data to be encrypted; the second is optional additional data
that will not be encrypted but will be part of the GCM MAC calculation which also covers the data to be encrypted.</p>
<h1 id="descryption" class="section-header"><a href="#descryption">Descryption</a></h1>
<p>The seal_data function retrieves a key unique to the enclave and uses
that key to encrypt the input data buffer. This function can be utilized to preserve secret
data after the enclave is destroyed. The sealed data blob can be
unsealed on future instantiations of the enclave.
The additional data buffer will not be encrypted but will be part of the MAC
calculation that covers the encrypted data as well. This data may include
information about the application, version, data, etc which can be utilized to
identify the sealed data blob since it will remain plain text
Use <code>calc_raw_sealed_data_size</code> to calculate the number of bytes to
allocate for the <code>SgxSealedData</code> structure. The input sealed data buffer and
text2encrypt buffers must be allocated within the enclave.</p>
<h1 id="requirements-1" class="section-header"><a href="#requirements-1">Requirements</a></h1>
<p>Library: libsgx_tservice.a or libsgx_tservice_sim.a (simulation)</p>
<h1 id="parameters-1" class="section-header"><a href="#parameters-1">Parameters</a></h1>
<p><strong>additional_text</strong></p>
<p>Pointer to the additional Message Authentication Code (MAC) data.
This additional data is optional and no data is necessary.</p>
<p><strong>encrypt_text</strong></p>
<p>Pointer to the data stream to be encrypted, which is &amp;T. Must be within the enclave.</p>
<h1 id="return-value-1" class="section-header"><a href="#return-value-1">Return value</a></h1>
<p>The sealed data in SgxSealedData.</p>
<h1 id="errors" class="section-header"><a href="#errors">Errors</a></h1>
<p><strong>SGX_ERROR_INVALID_PARAMETER</strong></p>
<p>Indicates an error if the parameters do not meet any of the following conditions:</p>
<ul>
<li>additional_text buffer can be within or outside the enclave, but cannot cross the enclave boundary.</li>
<li>encrypt_text must be non-zero.</li>
<li>encrypt_text buffer must be within the enclave.</li>
</ul>
<p><strong>SGX_ERROR_OUT_OF_MEMORY</strong></p>
<p>The enclave is out of memory.</p>
<p><strong>SGX_ERROR_UNEXPECTED</strong></p>
<p>Indicates a crypto library failure or the RDRAND instruction fails to generate a
random number.</p>
</div><h4 id='method.seal_data_ex' class="method"><span id='seal_data_ex.v' class='invisible'><code>fn <a href='#method.seal_data_ex' class='fnname'>seal_data_ex</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;key_policy: u16, <br>&nbsp;&nbsp;&nbsp;&nbsp;attribute_mask: <a class="struct" href="../../sgx_types/types/struct.sgx_attributes_t.html" title="struct sgx_types::types::sgx_attributes_t">sgx_attributes_t</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;misc_mask: <a class="type" href="../../sgx_types/types/type.sgx_misc_select_t.html" title="type sgx_types::types::sgx_misc_select_t">sgx_misc_select_t</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;additional_text: &amp;[u8], <br>&nbsp;&nbsp;&nbsp;&nbsp;encrypt_text: &amp;T<br>) -&gt; <a class="type" href="../../sgx_types/error/type.SgxResult.html" title="type sgx_types::error::SgxResult">SgxResult</a>&lt;Self&gt;</code></span></h4>
<div class='docblock'><p>This function is used to AES-GCM encrypt the input data. Two input data sets
are provided: one is the data to be encrypted; the second is optional additional
data that will not be encrypted but will be part of the GCM MAC calculation
which also covers the data to be encrypted. This is the expert mode
version of function <code>seal_data</code>.</p>
<h1 id="descryption-1" class="section-header"><a href="#descryption-1">Descryption</a></h1>
<p>The <code>seal_data_ex</code> is an extended version of <code>seal_data</code>. It
provides parameters for you to identify how to derive the sealing key (key
policy and attributes_mask). Typical callers of the seal library should be
able to use <code>seal_data</code> and the default values provided for key_
policy (MR_SIGNER) and an attribute mask which includes the RESERVED,
INITED and DEBUG bits. Users of this function should have a clear understanding
of the impact on using a policy and/or attribute_mask that is different from that in seal_data.</p>
<h1 id="requirements-2" class="section-header"><a href="#requirements-2">Requirements</a></h1>
<p>Library: libsgx_tservice.a or libsgx_tservice_sim.a (simulation)</p>
<h1 id="parameters-2" class="section-header"><a href="#parameters-2">Parameters</a></h1>
<p><strong>key_policy</strong></p>
<p>Specifies the policy to use in the key derivation. Function sgx_seal_data uses the MRSIGNER policy.</p>
<table><thead><tr><th>Key policy name </th><th> Value </th><th> Description</th></tr></thead><tbody>
<tr><td>KEYPOLICY_MRENCLAVE </td><td> 0x0001 </td><td> -Derive key using the enclave??s ENCLAVE measurement register</td></tr>
<tr><td>KEYPOLICY_MRSIGNER </td><td>0x0002 </td><td> -Derive key using the enclave??s SIGNER measurement register</td></tr>
</tbody></table>
<p><strong>attribute_mask</strong></p>
<p>Identifies which platform/enclave attributes to use in the key derivation. See<br />
the definition of sgx_attributes_t to determine which attributes will be<br />
checked.  Function sgx_seal_data uses flags=0xfffffffffffffff3,?xfrm=0.</p>
<p><strong>misc_mask</strong></p>
<p>The misc mask bits for the enclave. Reserved for future function extension.</p>
<p><strong>additional_text</strong></p>
<p>Pointer to the additional Message Authentication Code (MAC) data.
This additional data is optional and no data is necessary.</p>
<p><strong>encrypt_text</strong></p>
<p>Pointer to the data stream to be encrypted, which is &amp;T. Must not be NULL. Must be within the enclave.</p>
<h1 id="return-value-2" class="section-header"><a href="#return-value-2">Return value</a></h1>
<p>The sealed data in SgxSealedData.</p>
<h1 id="errors-1" class="section-header"><a href="#errors-1">Errors</a></h1>
<p><strong>SGX_ERROR_INVALID_PARAMETER</strong></p>
<p>Indicates an error if the parameters do not meet any of the following conditions:</p>
<ul>
<li>additional_text buffer can be within or outside the enclave, but cannot cross the enclave boundary.</li>
<li>encrypt_text must be non-zero.</li>
<li>encrypt_text buffer must be within the enclave.</li>
</ul>
<p><strong>SGX_ERROR_OUT_OF_MEMORY</strong></p>
<p>The enclave is out of memory.</p>
<p><strong>SGX_ERROR_UNEXPECTED</strong></p>
<p>Indicates a crypto library failure or the RDRAND instruction fails to generate a
random number.</p>
</div><h4 id='method.unseal_data' class="method"><span id='unseal_data.v' class='invisible'><code>fn <a href='#method.unseal_data' class='fnname'>unseal_data</a>(&amp;self) -&gt; <a class="type" href="../../sgx_types/error/type.SgxResult.html" title="type sgx_types::error::SgxResult">SgxResult</a>&lt;<a class="struct" href="../../sgx_tseal/seal/struct.SgxUnsealedData.html" title="struct sgx_tseal::seal::SgxUnsealedData">SgxUnsealedData</a>&lt;T&gt;&gt;</code></span></h4>
<div class='docblock'><p>This function is used to AES-GCM decrypt the input sealed data structure.
Two output data sets result: one is the decrypted data; the second is the
optional additional data that was part of the GCM MAC calculation but was not
encrypted. This function provides the converse of seal_data and
seal_data_ex.</p>
<h1 id="descryption-2" class="section-header"><a href="#descryption-2">Descryption</a></h1>
<p>The unseal_data function AES-GCM decrypts the sealed data so that
the enclave data can be restored. This function can be utilized to restore
secret data that was preserved after an earlier instantiation of this enclave
saved this data.</p>
<h1 id="requirements-3" class="section-header"><a href="#requirements-3">Requirements</a></h1>
<p>Library: libsgx_tservice.a or libsgx_tservice_sim.a (simulation)</p>
<h1 id="return-value-3" class="section-header"><a href="#return-value-3">Return value</a></h1>
<p>The unsealed data in SgxUnsealedData.</p>
<h1 id="errors-2" class="section-header"><a href="#errors-2">Errors</a></h1>
<p><strong>SGX_ERROR_INVALID_PARAMETER</strong></p>
<p>The size of T may be zero.</p>
<p><strong>SGX_ERROR_INVALID_CPUSVN</strong></p>
<p>The CPUSVN in the sealed data blob is beyond the CPUSVN value of the platform.
SGX_ERROR_INVALID_ISVSVN The ISVSVN in the sealed data blob is greater than the ISVSVN value of the enclave.</p>
<p><strong>SGX_ERROR_MAC_MISMATCH</strong></p>
<p>The tag verification failed during unsealing. The error may be caused by a platform update,
software update, or sealed data blob corruption. This error is also reported if other corruption
of the sealed data structure is detected.</p>
<p><strong>SGX_ERROR_OUT_OF_MEMORY</strong></p>
<p>The enclave is out of memory.</p>
<p><strong>SGX_ERROR_UNEXPECTED</strong></p>
<p>Indicates a crypto library failure or the RDRAND instruction fails to generate a
random number.</p>
</div></div><h3 class='impl'><span class='in-band'><code>impl&lt;T:&nbsp;<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Copy.html" title="trait core::marker::Copy">Copy</a>&gt; <a class="struct" href="../../sgx_tseal/seal/struct.SgxSealedData.html" title="struct sgx_tseal::seal::SgxSealedData">SgxSealedData</a>&lt;[T]&gt;</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../src/sgx_tseal/seal.rs.html#417-708' title='goto source code'>[src]</a></span></h3>
<div class='docblock'><p>The encrypt_text to seal is [T], and T must have Copy trait. </p>
</div><div class='impl-items'><h4 id='method.new-1' class="method"><span id='new.v-1' class='invisible'><code>fn <a href='#method.new-1' class='fnname'>new</a>() -&gt; Self</code></span></h4>
<div class='docblock'><p>Create a SgxSealedData with default values.</p>
</div><h4 id='method.from_raw_sealed_data_t-1' class="method"><span id='from_raw_sealed_data_t.v-1' class='invisible'><code>unsafe fn <a href='#method.from_raw_sealed_data_t-1' class='fnname'>from_raw_sealed_data_t</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;p: *mut <a class="struct" href="../../sgx_types/types/struct.sgx_sealed_data_t.html" title="struct sgx_types::types::sgx_sealed_data_t">sgx_sealed_data_t</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;len: u32<br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;Self&gt;</code></span></h4>
<div class='docblock'><p>Convert a pointer of sgx_sealed_data_t buffer to SgxSealedData.</p>
<h1 id="requirements-4" class="section-header"><a href="#requirements-4">Requirements</a></h1>
<p>Library: libsgx_tservice.a or libsgx_tservice_sim.a (simulation)</p>
<h1 id="parameters-3" class="section-header"><a href="#parameters-3">Parameters</a></h1>
<p><strong>p</strong></p>
<p>The mutable pointer of sgx_sealed_data_t buffer.</p>
<p><strong>len</strong></p>
<p>The size of the parameter <code>p</code>.</p>
<h1 id="return-value-4" class="section-header"><a href="#return-value-4">Return value</a></h1>
<p><strong>Some(SgxSealedData)</strong></p>
<p>Indicates the conversion is successfully. The return value is SgxSealedData.</p>
<p><strong>None</strong></p>
<p>Maybe the size of T is zero.</p>
</div><h4 id='method.seal_data-1' class="method"><span id='seal_data.v-1' class='invisible'><code>fn <a href='#method.seal_data-1' class='fnname'>seal_data</a>(additional_text: &amp;[u8], encrypt_text: &amp;[T]) -&gt; <a class="type" href="../../sgx_types/error/type.SgxResult.html" title="type sgx_types::error::SgxResult">SgxResult</a>&lt;Self&gt;</code></span></h4>
<div class='docblock'><p>This function is used to AES-GCM encrypt the input data. Two input data sets
are provided: one is the data to be encrypted; the second is optional additional data
that will not be encrypted but will be part of the GCM MAC calculation which also covers the data to be encrypted.</p>
<h1 id="descryption-3" class="section-header"><a href="#descryption-3">Descryption</a></h1>
<p>The seal_data function retrieves a key unique to the enclave and uses
that key to encrypt the input data buffer. This function can be utilized to preserve secret
data after the enclave is destroyed. The sealed data blob can be
unsealed on future instantiations of the enclave.
The additional data buffer will not be encrypted but will be part of the MAC
calculation that covers the encrypted data as well. This data may include
information about the application, version, data, etc which can be utilized to
identify the sealed data blob since it will remain plain text
Use <code>calc_raw_sealed_data_size</code> to calculate the number of bytes to
allocate for the <code>SgxSealedData</code> structure. The input sealed data buffer and
text2encrypt buffers must be allocated within the enclave.</p>
<h1 id="requirements-5" class="section-header"><a href="#requirements-5">Requirements</a></h1>
<p>Library: libsgx_tservice.a or libsgx_tservice_sim.a (simulation)</p>
<h1 id="parameters-4" class="section-header"><a href="#parameters-4">Parameters</a></h1>
<p><strong>additional_text</strong></p>
<p>Pointer to the additional Message Authentication Code (MAC) data.
This additional data is optional and no data is necessary.</p>
<p><strong>encrypt_text</strong></p>
<p>Pointer to the data stream to be encrypted, which is &amp;[T]. Must be within the enclave.</p>
<h1 id="return-value-5" class="section-header"><a href="#return-value-5">Return value</a></h1>
<p>The sealed data in SgxSealedData.</p>
<h1 id="errors-3" class="section-header"><a href="#errors-3">Errors</a></h1>
<p><strong>SGX_ERROR_INVALID_PARAMETER</strong></p>
<p>Indicates an error if the parameters do not meet any of the following conditions:</p>
<ul>
<li>additional_text buffer can be within or outside the enclave, but cannot cross the enclave boundary.</li>
<li>encrypt_text must be non-zero.</li>
<li>encrypt_text buffer must be within the enclave.</li>
</ul>
<p><strong>SGX_ERROR_OUT_OF_MEMORY</strong></p>
<p>The enclave is out of memory.</p>
<p><strong>SGX_ERROR_UNEXPECTED</strong></p>
<p>Indicates a crypto library failure or the RDRAND instruction fails to generate a
random number.</p>
</div><h4 id='method.seal_data_ex-1' class="method"><span id='seal_data_ex.v-1' class='invisible'><code>fn <a href='#method.seal_data_ex-1' class='fnname'>seal_data_ex</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;key_policy: u16, <br>&nbsp;&nbsp;&nbsp;&nbsp;attribute_mask: <a class="struct" href="../../sgx_types/types/struct.sgx_attributes_t.html" title="struct sgx_types::types::sgx_attributes_t">sgx_attributes_t</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;misc_mask: <a class="type" href="../../sgx_types/types/type.sgx_misc_select_t.html" title="type sgx_types::types::sgx_misc_select_t">sgx_misc_select_t</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;additional_text: &amp;[u8], <br>&nbsp;&nbsp;&nbsp;&nbsp;encrypt_text: &amp;[T]<br>) -&gt; <a class="type" href="../../sgx_types/error/type.SgxResult.html" title="type sgx_types::error::SgxResult">SgxResult</a>&lt;Self&gt;</code></span></h4>
<div class='docblock'><p>This function is used to AES-GCM encrypt the input data. Two input data sets
are provided: one is the data to be encrypted; the second is optional additional
data that will not be encrypted but will be part of the GCM MAC calculation
which also covers the data to be encrypted. This is the expert mode
version of function <code>seal_data</code>.</p>
<h1 id="descryption-4" class="section-header"><a href="#descryption-4">Descryption</a></h1>
<p>The <code>seal_data_ex</code> is an extended version of <code>seal_data</code>. It
provides parameters for you to identify how to derive the sealing key (key
policy and attributes_mask). Typical callers of the seal library should be
able to use <code>seal_data</code> and the default values provided for key_
policy (MR_SIGNER) and an attribute mask which includes the RESERVED,
INITED and DEBUG bits. Users of this function should have a clear understanding
of the impact on using a policy and/or attribute_mask that is different from that in seal_data.</p>
<h1 id="requirements-6" class="section-header"><a href="#requirements-6">Requirements</a></h1>
<p>Library: libsgx_tservice.a or libsgx_tservice_sim.a (simulation)</p>
<h1 id="parameters-5" class="section-header"><a href="#parameters-5">Parameters</a></h1>
<p><strong>key_policy</strong></p>
<p>Specifies the policy to use in the key derivation. Function sgx_seal_data uses the MRSIGNER policy.</p>
<table><thead><tr><th>Key policy name </th><th> Value </th><th> Description</th></tr></thead><tbody>
<tr><td>KEYPOLICY_MRENCLAVE </td><td> 0x0001 </td><td> -Derive key using the enclave??s ENCLAVE measurement register</td></tr>
<tr><td>KEYPOLICY_MRSIGNER </td><td>0x0002 </td><td> -Derive key using the enclave??s SIGNER measurement register</td></tr>
</tbody></table>
<p><strong>attribute_mask</strong></p>
<p>Identifies which platform/enclave attributes to use in the key derivation. See<br />
the definition of sgx_attributes_t to determine which attributes will be<br />
checked.  Function sgx_seal_data uses flags=0xfffffffffffffff3,?xfrm=0.</p>
<p><strong>misc_mask</strong></p>
<p>The misc mask bits for the enclave. Reserved for future function extension.</p>
<p><strong>additional_text</strong></p>
<p>Pointer to the additional Message Authentication Code (MAC) data.
This additional data is optional and no data is necessary.</p>
<p><strong>encrypt_text</strong></p>
<p>Pointer to the data stream to be encrypted, which is &amp;[T]. Must not be NULL. Must be within the enclave.</p>
<h1 id="return-value-6" class="section-header"><a href="#return-value-6">Return value</a></h1>
<p>The sealed data in SgxSealedData.</p>
<h1 id="errors-4" class="section-header"><a href="#errors-4">Errors</a></h1>
<p><strong>SGX_ERROR_INVALID_PARAMETER</strong></p>
<p>Indicates an error if the parameters do not meet any of the following conditions:</p>
<ul>
<li>additional_text buffer can be within or outside the enclave, but cannot cross the enclave boundary.</li>
<li>encrypt_text must be non-zero.</li>
<li>encrypt_text buffer must be within the enclave.</li>
</ul>
<p><strong>SGX_ERROR_OUT_OF_MEMORY</strong></p>
<p>The enclave is out of memory.</p>
<p><strong>SGX_ERROR_UNEXPECTED</strong></p>
<p>Indicates a crypto library failure or the RDRAND instruction fails to generate a
random number.</p>
</div><h4 id='method.unseal_data-1' class="method"><span id='unseal_data.v-1' class='invisible'><code>fn <a href='#method.unseal_data-1' class='fnname'>unseal_data</a>(&amp;self) -&gt; <a class="type" href="../../sgx_types/error/type.SgxResult.html" title="type sgx_types::error::SgxResult">SgxResult</a>&lt;<a class="struct" href="../../sgx_tseal/seal/struct.SgxUnsealedData.html" title="struct sgx_tseal::seal::SgxUnsealedData">SgxUnsealedData</a>&lt;[T]&gt;&gt;</code></span></h4>
<div class='docblock'><p>This function is used to AES-GCM decrypt the input sealed data structure.
Two output data sets result: one is the decrypted data; the second is the
optional additional data that was part of the GCM MAC calculation but was not
encrypted. This function provides the converse of seal_data and
seal_data_ex.</p>
<h1 id="descryption-5" class="section-header"><a href="#descryption-5">Descryption</a></h1>
<p>The unseal_data function AES-GCM decrypts the sealed data so that
the enclave data can be restored. This function can be utilized to restore
secret data that was preserved after an earlier instantiation of this enclave
saved this data.</p>
<h1 id="requirements-7" class="section-header"><a href="#requirements-7">Requirements</a></h1>
<p>Library: libsgx_tservice.a or libsgx_tservice_sim.a (simulation)</p>
<h1 id="return-value-7" class="section-header"><a href="#return-value-7">Return value</a></h1>
<p>The unsealed data in SgxUnsealedData.</p>
<h1 id="errors-5" class="section-header"><a href="#errors-5">Errors</a></h1>
<p><strong>SGX_ERROR_INVALID_PARAMETER</strong></p>
<p>The size of T may be zero.</p>
<p><strong>SGX_ERROR_INVALID_CPUSVN</strong></p>
<p>The CPUSVN in the sealed data blob is beyond the CPUSVN value of the platform.
SGX_ERROR_INVALID_ISVSVN The ISVSVN in the sealed data blob is greater than the ISVSVN value of the enclave.</p>
<p><strong>SGX_ERROR_MAC_MISMATCH</strong></p>
<p>The tag verification failed during unsealing. The error may be caused by a platform update,
software update, or sealed data blob corruption. This error is also reported if other corruption
of the sealed data structure is detected.</p>
<p><strong>SGX_ERROR_OUT_OF_MEMORY</strong></p>
<p>The enclave is out of memory.</p>
<p><strong>SGX_ERROR_UNEXPECTED</strong></p>
<p>Indicates a crypto library failure or the RDRAND instruction fails to generate a
random number.</p>
</div></div><h3 class='impl'><span class='in-band'><code>impl&lt;T:&nbsp;?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>&gt; <a class="struct" href="../../sgx_tseal/seal/struct.SgxSealedData.html" title="struct sgx_tseal::seal::SgxSealedData">SgxSealedData</a>&lt;T&gt;</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../src/sgx_tseal/seal.rs.html#710-785' title='goto source code'>[src]</a></span></h3>
<div class='impl-items'><h4 id='method.get_payload_size' class="method"><span id='get_payload_size.v' class='invisible'><code>fn <a href='#method.get_payload_size' class='fnname'>get_payload_size</a>(&amp;self) -&gt; u32</code></span></h4>
<div class='docblock'><p>Get the size of payload in SgxSealedData.</p>
</div><h4 id='method.get_payload_tag' class="method"><span id='get_payload_tag.v' class='invisible'><code>fn <a href='#method.get_payload_tag' class='fnname'>get_payload_tag</a>(&amp;self) -&gt; &amp;[u8; 16]</code></span></h4>
<div class='docblock'><p>Get a slice of payload in SgxSealedData.</p>
</div><h4 id='method.get_key_request' class="method"><span id='get_key_request.v' class='invisible'><code>fn <a href='#method.get_key_request' class='fnname'>get_key_request</a>(&amp;self) -&gt; &amp;<a class="struct" href="../../sgx_types/types/struct.sgx_key_request_t.html" title="struct sgx_types::types::sgx_key_request_t">sgx_key_request_t</a></code></span></h4>
<div class='docblock'><p>Get the pointer of sgx_key_request_t in SgxSealedData.</p>
</div><h4 id='method.get_encrypt_txt' class="method"><span id='get_encrypt_txt.v' class='invisible'><code>fn <a href='#method.get_encrypt_txt' class='fnname'>get_encrypt_txt</a>(&amp;self) -&gt; &amp;[u8]</code></span></h4>
<div class='docblock'><p>Get a slice of encrypt text in SgxSealedData.</p>
</div><h4 id='method.get_additional_txt' class="method"><span id='get_additional_txt.v' class='invisible'><code>fn <a href='#method.get_additional_txt' class='fnname'>get_additional_txt</a>(&amp;self) -&gt; &amp;[u8]</code></span></h4>
<div class='docblock'><p>Get a slice of additional text in SgxSealedData.</p>
</div><h4 id='method.calc_raw_sealed_data_size' class="method"><span id='calc_raw_sealed_data_size.v' class='invisible'><code>fn <a href='#method.calc_raw_sealed_data_size' class='fnname'>calc_raw_sealed_data_size</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;add_mac_txt_size: u32, <br>&nbsp;&nbsp;&nbsp;&nbsp;encrypt_txt_size: u32<br>) -&gt; u32</code></span></h4>
<div class='docblock'><p>Calculate the size of the sealed data in SgxSealedData.</p>
</div><h4 id='method.get_add_mac_txt_len' class="method"><span id='get_add_mac_txt_len.v' class='invisible'><code>fn <a href='#method.get_add_mac_txt_len' class='fnname'>get_add_mac_txt_len</a>(&amp;self) -&gt; u32</code></span></h4>
<div class='docblock'><p>Get the size of the additional mactext in SgxSealedData.</p>
</div><h4 id='method.get_encrypt_txt_len' class="method"><span id='get_encrypt_txt_len.v' class='invisible'><code>fn <a href='#method.get_encrypt_txt_len' class='fnname'>get_encrypt_txt_len</a>(&amp;self) -&gt; u32</code></span></h4>
<div class='docblock'><p>Get the size of the encrypt text in SgxSealedData.</p>
</div><h4 id='method.to_raw_sealed_data_t' class="method"><span id='to_raw_sealed_data_t.v' class='invisible'><code>unsafe fn <a href='#method.to_raw_sealed_data_t' class='fnname'>to_raw_sealed_data_t</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;p: *mut <a class="struct" href="../../sgx_types/types/struct.sgx_sealed_data_t.html" title="struct sgx_types::types::sgx_sealed_data_t">sgx_sealed_data_t</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;len: u32<br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;*mut <a class="struct" href="../../sgx_types/types/struct.sgx_sealed_data_t.html" title="struct sgx_types::types::sgx_sealed_data_t">sgx_sealed_data_t</a>&gt;</code></span></h4>
<div class='docblock'><p>Convert SgxSealedData to the pointer of sgx_sealed_data_t.</p>
<h1 id="parameters-6" class="section-header"><a href="#parameters-6">Parameters</a></h1>
<p><strong>p</strong></p>
<p>The pointer of sgx_sealed_data_t to save the data in SgxSealedData.</p>
<p><strong>len</strong></p>
<p>The size of the pointer of sgx_sealed_data_t.</p>
<h1 id="error" class="section-header"><a href="#error">Error</a></h1>
<p><em><em>Some(</em> mut sgx_sealed_data_t)</em>*</p>
<p>Indicates the conversion is successfully. The return value is the pointer of sgx_sealed_data_t.</p>
<p><strong>None</strong></p>
<p>May be the parameter p and len is not avaliable.</p>
</div></div><h2 id='implementations'>Trait Implementations</h2><h3 class='impl'><span class='in-band'><code>impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/default/trait.Default.html" title="trait core::default::Default">Default</a> for <a class="struct" href="../../sgx_tseal/seal/struct.SgxSealedData.html" title="struct sgx_tseal::seal::SgxSealedData">SgxSealedData</a>&lt;T&gt;</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../src/sgx_tseal/seal.rs.html#113-120' title='goto source code'>[src]</a></span></h3>
<div class='impl-items'><h4 id='method.default' class="method"><span id='default.v' class='invisible'><code>fn <a href='https://doc.rust-lang.org/nightly/core/default/trait.Default.html#tymethod.default' class='fnname'>default</a>() -&gt; <a class="struct" href="../../sgx_tseal/seal/struct.SgxSealedData.html" title="struct sgx_tseal::seal::SgxSealedData">SgxSealedData</a>&lt;T&gt;</code></span></h4>
<div class='docblock'><p>Returns the &quot;default value&quot; for a type. <a href="https://doc.rust-lang.org/nightly/core/default/trait.Default.html#tymethod.default">Read more</a></p>
</div></div><h3 class='impl'><span class='in-band'><code>impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/default/trait.Default.html" title="trait core::default::Default">Default</a> for <a class="struct" href="../../sgx_tseal/seal/struct.SgxSealedData.html" title="struct sgx_tseal::seal::SgxSealedData">SgxSealedData</a>&lt;[T]&gt;</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../src/sgx_tseal/seal.rs.html#122-130' title='goto source code'>[src]</a></span></h3>
<div class='impl-items'><h4 id='method.default-1' class="method"><span id='default.v-1' class='invisible'><code>fn <a href='https://doc.rust-lang.org/nightly/core/default/trait.Default.html#tymethod.default' class='fnname'>default</a>() -&gt; <a class="struct" href="../../sgx_tseal/seal/struct.SgxSealedData.html" title="struct sgx_tseal::seal::SgxSealedData">SgxSealedData</a>&lt;[T]&gt;</code></span></h4>
<div class='docblock'><p>Returns the &quot;default value&quot; for a type. <a href="https://doc.rust-lang.org/nightly/core/default/trait.Default.html#tymethod.default">Read more</a></p>
</div></div><h3 class='impl'><span class='in-band'><code>impl&lt;T:&nbsp;?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> for <a class="struct" href="../../sgx_tseal/seal/struct.SgxSealedData.html" title="struct sgx_tseal::seal::SgxSealedData">SgxSealedData</a>&lt;T&gt;</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../src/sgx_tseal/seal.rs.html#132-139' title='goto source code'>[src]</a></span></h3>
<div class='impl-items'><h4 id='method.clone' class="method"><span id='clone.v' class='invisible'><code>fn <a href='https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html#tymethod.clone' class='fnname'>clone</a>(&amp;self) -&gt; <a class="struct" href="../../sgx_tseal/seal/struct.SgxSealedData.html" title="struct sgx_tseal::seal::SgxSealedData">SgxSealedData</a>&lt;T&gt;</code></span></h4>
<div class='docblock'><p>Returns a copy of the value. <a href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html#tymethod.clone">Read more</a></p>
</div><h4 id='method.clone_from' class="method"><span id='clone_from.v' class='invisible'><code>fn <a href='https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html#method.clone_from' class='fnname'>clone_from</a>(&amp;mut self, source: &amp;Self)</code><div class='since' title='Stable since Rust version 1.0.0'>1.0.0</div></span></h4>
<div class='docblock'><p>Performs copy-assignment from <code>source</code>. <a href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html#method.clone_from">Read more</a></p>
</div></div></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <aside id="help" class="hidden">
        <div>
            <h1 class="hidden">Help</h1>

            <div class="shortcuts">
                <h2>Keyboard Shortcuts</h2>

                <dl>
                    <dt>?</dt>
                    <dd>Show this help dialog</dd>
                    <dt>S</dt>
                    <dd>Focus the search field</dd>
                    <dt>&larrb;</dt>
                    <dd>Move up in search results</dd>
                    <dt>&rarrb;</dt>
                    <dd>Move down in search results</dd>
                    <dt>&#9166;</dt>
                    <dd>Go to active search result</dd>
                    <dt>+</dt>
                    <dd>Collapse/expand all sections</dd>
                </dl>
            </div>

            <div class="infos">
                <h2>Search Tricks</h2>

                <p>
                    Prefix searches with a type followed by a colon (e.g.
                    <code>fn:</code>) to restrict the search to a given type.
                </p>

                <p>
                    Accepted types are: <code>fn</code>, <code>mod</code>,
                    <code>struct</code>, <code>enum</code>,
                    <code>trait</code>, <code>type</code>, <code>macro</code>,
                    and <code>const</code>.
                </p>

                <p>
                    Search functions by type signature (e.g.
                    <code>vec -> usize</code> or <code>* -> vec</code>)
                </p>
            </div>
        </div>
    </aside>

    

    <script>
        window.rootPath = "../../";
        window.currentCrate = "sgx_tseal";
    </script>
    <script src="../../jquery.js"></script>
    <script src="../../main.js"></script>
    <script defer src="../../search-index.js"></script>
</body>
</html>